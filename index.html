<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Fashionhabits ‚Äî Streetwear & Chic</title>
  <meta name="description" content="Fashionhabits : boutique streetwear & chic. V√™tements et chaussures unisexes. Qualit√©, style moderne, livraisons en France & Europe.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#0a0a0b;
      --panel:#121214;
      --text:#f3f4f6;
      --muted:#a3a3a3;
      --accent-start:#7c3aed;
      --accent-end:#22d3ee;
      --success:#10b981;
      --danger:#ef4444;
      --shadow:0 10px 30px rgba(0,0,0,.3);
      --radius:18px;
      --border:1px solid rgba(255,255,255,.08);
      --glass:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02));
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,"Helvetica Neue",Arial,"Noto Sans";line-height:1.5}
    a{color:inherit;text-decoration:none}
    img{display:block;max-width:100%}

    /* Header */
    .header{position:sticky;top:0;z-index:50;background:rgba(10,10,11,.6);backdrop-filter:blur(10px);border-bottom:1px solid rgba(255,255,255,.06)}
    .container{max-width:1200px;margin:0 auto;padding:0 20px}
    .nav{display:flex;align-items:center;justify-content:space-between;height:68px}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:36px;height:36px;border-radius:12px;background:linear-gradient(135deg,var(--accent-start),var(--accent-end));box-shadow:var(--shadow)}
    .brand h1{font-size:1.25rem;margin:0;font-weight:800;letter-spacing:.5px}
    .menu a{margin:0 12px;color:var(--muted)}
    .menu a.active,.menu a:hover{color:var(--text)}
    .cart-btn{display:flex;align-items:center;gap:10px;background:linear-gradient(135deg,var(--accent-start),var(--accent-end));border:none;color:white;padding:10px 14px;border-radius:14px;cursor:pointer;font-weight:700;box-shadow:var(--shadow)}

    /* Hero (image retir√©e ‚Üí layout 1 colonne) */
    .hero{border-bottom:1px solid rgba(255,255,255,.06)}
    .hero .wrap{display:block;padding:56px 0}
    .badge{display:inline-flex;align-items:center;gap:8px;padding:6px 12px;border-radius:999px;background:rgba(255,255,255,.06);color:var(--muted);border:1px solid rgba(255,255,255,.08)}
    .title{font-size:clamp(32px,6vw,56px);line-height:1.05;margin:14px 0 10px;font-weight:800}
    .subtitle{color:var(--muted);max-width:65ch}
    .cta{margin-top:20px;display:flex;gap:12px}
    .btn{display:inline-block;padding:12px 18px;border-radius:14px;font-weight:700;border:1px solid rgba(255,255,255,.12)}
    .btn-primary{background:linear-gradient(135deg,var(--accent-start),var(--accent-end));border:none;color:white;box-shadow:var(--shadow)}
    .btn-ghost{color:var(--text)}

    /* Section */
    section{padding:56px 0;border-top:1px solid rgba(255,255,255,.06)}
    h2.section-title{font-size:clamp(24px,4vw,36px);margin:0 0 18px 0}
    p.section-sub{color:var(--muted);margin:0 0 24px 0}

    /* Products grid */
    .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:20px}
    .card{background:var(--glass);border:var(--border);border-radius:var(--radius);overflow:hidden;box-shadow:var(--shadow);display:flex;flex-direction:column;cursor:pointer}
    .card img{aspect-ratio:4/5;object-fit:cover;transition:transform .35s ease}
    .card:hover img{transform:scale(1.03)}
    .card-body{padding:14px}
    .meta{display:flex;justify-content:space-between;align-items:center;margin-top:6px;color:var(--muted)}
    .price{font-weight:800}
    .variant{margin:10px 0;display:flex;gap:8px;flex-wrap:wrap}
    .pill{padding:6px 10px;border-radius:12px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);cursor:pointer;font-size:.9rem}
    .pill.active{background:linear-gradient(135deg,var(--accent-start),var(--accent-end));color:white;border:none}
    .add-btn{margin-top:auto;display:block;width:100%;text-align:center;padding:12px;border:none;border-top:1px solid rgba(255,255,255,.1);background:rgba(255,255,255,.04);color:white;font-weight:700;cursor:pointer}
    .add-btn:hover{background:rgba(255,255,255,.08)}

    /* Cart drawer */
    .drawer{position:fixed;inset:0 0 0 auto;width:min(420px,100%);background:var(--panel);transform:translateX(110%);transition:transform .35s ease;box-shadow:var(--shadow);border-left:1px solid rgba(255,255,255,.08);z-index:100}
    .drawer.open{transform:none}
    .drawer header{display:flex;align-items:center;justify-content:space-between;padding:16px 16px;border-bottom:1px solid rgba(255,255,255,.08)}
    .drawer .items{max-height:60vh;overflow:auto;display:flex;flex-direction:column;gap:12px;padding:12px 16px}
    .item{display:grid;grid-template-columns:64px 1fr auto;gap:12px;align-items:center;background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.06);border-radius:12px;padding:8px}
    .qty{display:flex;align-items:center;gap:8px}
    .qty button{width:28px;height:28px;border-radius:8px;border:1px solid rgba(255,255,255,.1);background:rgba(255,255,255,.06);color:white;cursor:pointer}
    .drawer footer{padding:16px;border-top:1px solid rgba(255,255,255,.08)}
    .summary{display:flex;justify-content:space-between;margin-bottom:12px}
    .checkout{width:100%;padding:12px 16px;border:none;border-radius:12px;background:linear-gradient(135deg,var(--accent-start),var(--accent-end));color:white;font-weight:800;cursor:pointer}
    .note{color:var(--muted);font-size:.9rem;margin-top:8px}
    .error{color:var(--danger);margin-top:8px}
    .success{color:var(--success);margin-top:8px}

    /* Info blocks */
    .usp{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-top:20px}
    .usp .block{background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);padding:16px;border-radius:16px}
    .muted{color:var(--muted)}

    /* ---------- Product Modal (fiche produit) ---------- */
    .overlay{position:fixed;inset:0;background:rgba(0,0,0,.55);backdrop-filter:blur(6px);display:none;align-items:center;justify-content:center;padding:16px;z-index:120}
    .overlay.show{display:flex}
    .modal{width:min(1000px,100%);background:var(--panel);border:var(--border);border-radius:22px;box-shadow:var(--shadow);overflow:hidden}
    .modal header{display:flex;justify-content:space-between;align-items:center;padding:16px;border-bottom:var(--border)}
    .modal header h3{margin:0;font-size:1.25rem}
    .close{border:none;background:transparent;color:var(--muted);font-size:1.4rem;cursor:pointer}
    .modal-body{display:grid;grid-template-columns:1.05fr .95fr}
    .gallery{border-right:var(--border);background:rgba(255,255,255,.02)}
    .gallery .main{aspect-ratio:4/5;object-fit:cover;width:100%;cursor:zoom-in}
    .thumbs{display:grid;grid-template-columns:repeat(4,1fr);gap:8px;padding:12px;border-top:var(--border)}
    .thumbs img{aspect-ratio:1/1;object-fit:cover;border-radius:10px;border:1px solid rgba(255,255,255,.1);cursor:pointer}
    .details{padding:18px}
    .price-lg{font-size:1.4rem;font-weight:800}
    .desc{color:var(--muted);margin:8px 0 14px}
    .sizes{display:flex;flex-wrap:wrap;gap:8px;margin:12px 0}
    .cta-row{display:flex;gap:10px;margin-top:10px}
    .primary{flex:1;background:linear-gradient(135deg,var(--accent-start),var(--accent-end));border:none;color:#fff;padding:12px 16px;border-radius:12px;font-weight:800;cursor:pointer}
    .secondary{padding:12px 16px;border-radius:12px;background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.1);color:#fff;font-weight:700;cursor:pointer}
    .rating{display:flex;align-items:center;gap:6px;margin-top:6px}
    .star{filter:grayscale(0)}
    .reviews{margin-top:16px;border-top:var(--border);padding-top:14px}
    .review{display:grid;grid-template-columns:auto 1fr;gap:10px;padding:10px 0;border-bottom:1px dashed rgba(255,255,255,.08)}
    .avatar{width:36px;height:36px;border-radius:999px;background:linear-gradient(135deg,var(--accent-start),var(--accent-end))}
    .review strong{display:block}
    .review p{margin:4px 0 0;color:var(--muted)}

    /* Footer */
    footer{padding:30px 0;color:var(--muted)}
    .links{display:flex;gap:16px;flex-wrap:wrap}
    .links a{color:var(--muted)}
    .legal{opacity:.7;font-size:.9rem;margin-top:8px}

    /* Responsive */
    @media (max-width: 980px){
      .grid{grid-template-columns:repeat(2,1fr)}
      .usp{grid-template-columns:1fr}
      .modal-body{grid-template-columns:1fr}
      .gallery{border-right:none;border-bottom:var(--border)}
    }
    @media (max-width: 640px){
      .menu{display:none}
      .grid{grid-template-columns:1fr}
    }
  </style>
</head>
<body>
  <header class="header">
    <div class="container nav">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <h1>Fashionhabits</h1>
      </div>
      <nav class="menu">
        <a href="#home" class="active">Accueil</a>
        <a href="#shop">Boutique</a>
        <a href="#about">√Ä propos</a>
        <a href="#contact">Contact</a>
      </nav>
      <button class="cart-btn" id="openCart" aria-label="Ouvrir le panier">üõí <span id="cartCount">0</span></button>
    </div>
  </header>

  <!-- HERO sans l‚Äôimage de droite -->
  <main id="home" class="hero">
    <div class="container wrap">
      <span class="badge">Nouveaut√© ‚Ä¢ Streetwear & Chic</span>
      <h2 class="title">Affirme ton style.<br/>√âpure, moderne, avec du caract√®re.</h2>
      <p class="subtitle">S√©lection unisexe de pi√®ces essentielles : coupes nettes, mati√®res confort, d√©tails premium. Livraison rapide en France & Europe.</p>
      <div class="cta">
        <a href="#shop" class="btn btn-primary">Voir la boutique</a>
        <a href="#about" class="btn btn-ghost">En savoir plus</a>
      </div>
      <div class="usp">
        <div class="block"><strong>Livraison 48‚Äì72h</strong><div class="muted">France M√©tropolitaine</div></div>
        <div class="block"><strong>Retours 14 jours</strong><div class="muted">√âchange ou remboursement</div></div>
        <div class="block"><strong>Paiement s√©curis√©</strong><div class="muted">Stripe ‚Ä¢ PayPal</div></div>
      </div>
    </div>
  </main>

  <!-- BOUTIQUE -->
  <section id="shop">
    <div class="container">
      <h2 class="section-title">Boutique</h2>
      <p class="section-sub">Clique sur un produit pour voir les d√©tails, les photos en grand, et les avis.</p>
      <div class="grid" id="productGrid"></div>
    </div>
  </section>

  <!-- Autres sections (inchang√©es) -->
  <section id="about">
    <div class="container">
      <h2 class="section-title">√Ä propos de Fashionhabits</h2>
      <p class="section-sub">Une marque ind√©pendante n√©e d'une id√©e simple : des pi√®ces faciles √† porter, au croisement du street et du chic. Nous sour√ßons avec soin, contr√¥lons la qualit√©, et exp√©dions rapidement depuis nos stocks.</p>
    </div>
  </section>

  <section id="contact">
    <div class="container">
      <h2 class="section-title">Contact</h2>
      <p class="section-sub">Une question sur une taille, un retour, ou une commande ? √âcris-nous √† <a href="mailto:hello@fashionhabits.fr">hello@fashionhabits.fr</a>.</p>
    </div>
  </section>

  <footer>
    <div class="container">
      <div class="links">
        <a href="#legal-mentions">Mentions l√©gales</a> ‚Ä¢
        <a href="#legal-privacy">Confidentialit√©</a> ‚Ä¢
        <a href="#legal-returns">Retours & Remboursements</a>
      </div>
      <div class="legal">¬© <span id="year"></span> Fashionhabits. Tous droits r√©serv√©s.</div>
    </div>
  </footer>

  <!-- PANIER -->
  <aside class="drawer" id="drawer">
    <header>
      <strong>Panier</strong>
      <button id="closeCart" aria-label="Fermer">‚úï</button>
    </header>
    <div class="items" id="cartItems"></div>
    <footer>
      <div class="summary"><span>Total</span><strong id="cartTotal">0,00 ‚Ç¨</strong></div>
      <button class="checkout" id="checkoutBtn">Payer maintenant</button>
      <div class="note">Le paiement est s√©curis√© via Stripe. (√Ä configurer plus tard.)</div>
      <div class="error" id="error"></div>
      <div class="success" id="success"></div>
    </footer>
  </aside>

  <!-- MODAL PRODUIT -->
  <div class="overlay" id="overlay" aria-hidden="true">
    <article class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <header>
        <h3 id="modalTitle">Produit</h3>
        <button class="close" id="modalClose" aria-label="Fermer">‚úï</button>
      </header>
      <div class="modal-body">
        <div class="gallery">
          <img id="modalMain" class="main" alt="">
          <div class="thumbs" id="modalThumbs"></div>
        </div>
        <div class="details">
          <div class="rating" id="modalRating"></div>
          <div style="display:flex;justify-content:space-between;align-items:center;margin:6px 0 2px">
            <strong id="modalName" style="font-size:1.15rem"></strong>
            <span id="modalPrice" class="price-lg"></span>
          </div>
          <div class="muted" id="modalMeta" style="margin-bottom:6px"></div>
          <p class="desc" id="modalDesc"></p>

          <div class="sizes" id="modalSizes"></div>
          <div class="cta-row">
            <button class="primary" id="modalAdd">Ajouter au panier</button>
            <button class="secondary" id="modalBuy">Acheter maintenant</button>
          </div>

          <div class="reviews" id="modalReviews">
            <strong style="display:block;margin-bottom:8px">Avis</strong>
            <!-- avis inject√©s ici -->
          </div>
        </div>
      </div>
    </article>
  </div>

  <script>
    // ------- DATA PRODUITS (ajout: description, photos, avis, note)
    const PRODUCTS = [
      {
        id:"tee-minimal-white",
        title:"T-shirt Minimal Blanc",
        price:29.9, category:"V√™tements", gender:"Unisexe",
        sizes:["XS","S","M","L","XL"],
        image:"https://images.unsplash.com/photo-1520975922284-5f5730d0f9b5?q=80&w=1200&auto=format&fit=crop",
        images:[
          "https://images.unsplash.com/photo-1520975922284-5f5730d0f9b5?q=80&w=1200&auto=format&fit=crop"
        ],
        description:"T-shirt coupe droite, coton doux 190g, col renforc√©. Id√©al en base minimaliste.",
        rating:4.7,
        reviews:[
          {author:"L√©a", text:"Bonne coupe, tissu √©pais. Taille M nickel."},
          {author:"Romain", text:"Simple et propre, va avec tout."}
        ],
        priceId:"price_xxx_TSHIRT_WHITE"
      },
      {
        id:"hoodie-black-street",
        title:"Hoodie Noir Street",
        price:54.9, category:"V√™tements", gender:"Unisexe",
        sizes:["S","M","L","XL"],
        image:"https://images.unsplash.com/photo-1520975867597-0f4a5f1f9f9e?q=80&w=1200&auto=format&fit=crop",
        images:[
          "https://images.unsplash.com/photo-1520975867597-0f4a5f1f9f9e?q=80&w=1200&auto=format&fit=crop"
        ],
        description:"Molleton doux int√©rieur bross√©, capuche doubl√©e, cordons renforc√©s, poche kangourou.",
        rating:4.8,
        reviews:[
          {author:"Imane", text:"Hyper confortable, noir profond üëå"},
          {author:"Alex", text:"Prend la taille au-dessus si tu veux oversize."}
        ],
        priceId:"price_xxx_HOODIE_BLACK"
      },
      {
        id:"cargo-olive",
        title:"Pantalon Cargo Olive",
        price:49.9, category:"V√™tements", gender:"Homme",
        sizes:["S","M","L","XL"],
        image:"https://images.unsplash.com/photo-1516826957135-700dedea698c?q=80&w=1200&auto=format&fit=crop",
        images:[
          "https://images.unsplash.com/photo-1516826957135-700dedea698c?q=80&w=1200&auto=format&fit=crop"
        ],
        description:"Coupe droite, poches cargo √† soufflet, tissu r√©sistant avec une l√©g√®re √©lasticit√©.",
        rating:4.6,
        reviews:[
          {author:"Nicolas", text:"Solide et styl√©, coup de c≈ìur."}
        ],
        priceId:"price_xxx_CARGO_OLIVE"
      },
      {
        id:"dress-satin-black",
        title:"Robe Satin Noire",
        price:59.9, category:"V√™tements", gender:"Femme",
        sizes:["XS","S","M","L"],
        image:"https://images.unsplash.com/photo-1519741497674-611481863552?q=80&w=1200&auto=format&fit=crop",
        images:[
          "https://images.unsplash.com/photo-1519741497674-611481863552?q=80&w=1200&auto=format&fit=crop"
        ],
        description:"Satin fluide, tomb√© √©l√©gant, bretelles fines r√©glables. Chic minimal.",
        rating:4.5,
        reviews:[
          {author:"Sonia", text:"Super tomb√©, tr√®s √©l√©gant."}
        ],
        priceId:"price_xxx_DRESS_BLACK"
      },
      {
        id:"sneakers-white-minimal",
        title:"Sneakers Blanches Minimal",
        price:69.9, category:"Chaussures", gender:"Unisexe",
        sizes:["36","37","38","39","40","41","42","43","44"],
        image:"https://images.unsplash.com/photo-1542291026-7eec264c27ff?q=80&w=1200&auto=format&fit=crop",
        images:[
          "https://images.unsplash.com/photo-1542291026-7eec264c27ff?q=80&w=1200&auto=format&fit=crop"
        ],
        description:"Cuir synth√© premium, semelle cousue, silhouette √©pur√©e quotidienne.",
        rating:4.7,
        reviews:[
          {author:"Yanis", text:"Confort +++ et faciles √† nettoyer."}
        ],
        priceId:"price_xxx_SNEAKERS_WHITE"
      },
      {
        id:"veste-polaire",
        title:"Veste Polaire",
        price:39.99, category:"V√™tements", gender:"Unisexe",
        sizes:["XS","S","M","L","XL"],
        image:"assets/veste-polaire-1.png",
        images:[
          "assets/veste-polaire-1.png",
          "assets/veste-polaire-2.png",
          "assets/veste-polaire-3.png",
          "assets/veste-polaire-4.png",
          "assets/veste-polaire-5.png"
        ],
        description:"Reste au chaud avec cette veste √† col montant doubl√©e polaire, parfaite pour l‚Äôautomne et l‚Äôhiver. Design bicolore moderne, poches pratiques, zip solide.",
        rating:4.8,
        reviews:[
          {author:"Camille", text:"Tr√®s douce et chaude, je recommande !"},
          {author:"Omar", text:"Style propre, coupe confortable."}
        ],
        priceId:"price_xxx_VESTE_POLAIRE"
      }
    ];

    // ------- Utils
    const formatPrice = (n) => new Intl.NumberFormat('fr-FR', { style:'currency', currency:'EUR' }).format(n);
    const el = (html) => { const t = document.createElement('template'); t.innerHTML = html.trim(); return t.content.firstElementChild; };

    // ------- Rendu grille produits
    const grid = document.getElementById('productGrid');
    PRODUCTS.forEach(p => {
      const sizes = p.sizes.map(s => `<button class="pill" data-size="${s}">${s}</button>`).join('');
      const card = el(`
        <article class="card" data-open="${p.id}">
          <img src="${p.image}" alt="${p.title}">
          <div class="card-body">
            <h3 style="margin:0;font-size:1.05rem">${p.title}</h3>
            <div class="meta">
              <span class="muted">${p.category} ‚Ä¢ ${p.gender}</span>
              <span class="price">${formatPrice(p.price)}</span>
            </div>
            <div class="variant" data-id="${p.id}">
              ${sizes}
            </div>
            <button class="add-btn" data-id="${p.id}">Ajouter au panier</button>
          </div>
        </article>
      `);
      grid.appendChild(card);
    });

    // ------- S√©lection tailles dans la grille
    document.querySelectorAll('.variant').forEach(v => {
      v.addEventListener('click', (e) => {
        if(e.target.classList.contains('pill')) {
          v.querySelectorAll('.pill').forEach(p => p.classList.remove('active'));
          e.target.classList.add('active');
        }
      });
    });

    // ------- Panier (localStorage)
    const CART_KEY = 'fh_cart_v1';
    const loadCart = () => JSON.parse(localStorage.getItem(CART_KEY) || '[]');
    const saveCart = (c) => localStorage.setItem(CART_KEY, JSON.stringify(c));
    const cartCount = document.getElementById('cartCount');
    const cartItems = document.getElementById('cartItems');
    const cartTotal = document.getElementById('cartTotal');
    const drawer = document.getElementById('drawer');
    const updateBadge = () => {
      const cart = loadCart();
      cartCount.textContent = cart.reduce((a,i) => a + i.qty, 0);
    };
    const renderCart = () => {
      const cart = loadCart();
      cartItems.innerHTML = '';
      let total = 0;
      cart.forEach(item => {
        const p = PRODUCTS.find(x => x.id === item.id);
        if(!p) return;
        const line = p.price * item.qty;
        total += line;
        const node = el(`
          <div class="item">
            <img src="${p.image}" alt="${p.title}">
            <div>
              <div><strong>${p.title}</strong></div>
              <div class="muted">Taille ${item.size}</div>
              <div class="muted">${formatPrice(p.price)} √ó ${item.qty}</div>
            </div>
            <div class="qty">
              <button data-action="dec" data-id="${item.id}" data-size="${item.size}">‚àí</button>
              <span>${item.qty}</span>
              <button data-action="inc" data-id="${item.id}" data-size="${item.size}">+</button>
            </div>
          </div>
        `);
        cartItems.appendChild(node);
      });
      cartTotal.textContent = formatPrice(total);
      updateBadge();
    };
    const openDrawer = () => drawer.classList.add('open');
    const closeDrawer = () => drawer.classList.remove('open');
    document.getElementById('openCart').addEventListener('click', () => { renderCart(); openDrawer(); });
    document.getElementById('closeCart').addEventListener('click', closeDrawer);
    cartItems.addEventListener('click', (e) => {
      if(e.target.tagName !== 'BUTTON') return;
      const id = e.target.dataset.id;
      const size = e.target.dataset.size;
      const action = e.target.dataset.action;
      const cart = loadCart();
      const idx = cart.findIndex(i => i.id === id && i.size === size);
      if(idx === -1) return;
      if(action === 'inc') cart[idx].qty += 1;
      if(action === 'dec') { cart[idx].qty -= 1; if(cart[idx].qty <= 0) cart.splice(idx,1); }
      saveCart(cart); renderCart();
    });
    updateBadge();

    // ------- Ajout au panier depuis la grille
    document.querySelectorAll('.add-btn').forEach(btn => {
      btn.addEventListener('click', (e) => {
        e.stopPropagation(); // √©vite d‚Äôouvrir la modal si on clique le bouton
        const id = btn.dataset.id;
        const variant = document.querySelector(`.variant[data-id="${id}"]`);
        const active = variant.querySelector('.pill.active');
        if(!active) { alert('Choisis une taille avant d‚Äôajouter au panier.'); return; }
        const size = active.dataset.size;
        const cart = loadCart();
        const existing = cart.find(i => i.id === id && i.size === size);
        if(existing) existing.qty += 1; else cart.push({ id, size, qty: 1 });
        saveCart(cart); renderCart(); openDrawer();
      });
    });

    // ------- MODAL PRODUIT (ouverture en cliquant la carte)
    const overlay = document.getElementById('overlay');
    const modalClose = document.getElementById('modalClose');
    const modalMain = document.getElementById('modalMain');
    const modalThumbs = document.getElementById('modalThumbs');
    const modalName = document.getElementById('modalName');
    const modalPrice = document.getElementById('modalPrice');
    const modalDesc = document.getElementById('modalDesc');
    const modalMeta = document.getElementById('modalMeta');
    const modalSizes = document.getElementById('modalSizes');
    const modalRating = document.getElementById('modalRating');
    const modalReviews = document.getElementById('modalReviews');
    const modalAdd = document.getElementById('modalAdd');
    const modalBuy = document.getElementById('modalBuy');
    let currentId = null, currentSize = null;

    function renderStars(note){
      const full = Math.round(note);
      return Array.from({length:5}, (_,i)=>`<span class="star">${i<full?"‚≠ê":"‚òÜ"}</span>`).join("") + `<span class="muted">(${note.toFixed(1)})</span>`;
    }

    function openProduct(id){
      const p = PRODUCTS.find(x=>x.id===id); if(!p) return;
      currentId = id; currentSize = p.sizes[0];

      // header
      modalName.textContent = p.title;
      modalPrice.textContent = formatPrice(p.price);
      modalMeta.textContent = `${p.category} ‚Ä¢ ${p.gender}`;
      modalDesc.textContent = p.description || '';
      modalRating.innerHTML = renderStars(p.rating || 4.6);

      // images
      const imgs = p.images?.length ? p.images : [p.image];
      modalMain.src = imgs[0];
      modalMain.alt = p.title;
      modalThumbs.innerHTML = imgs.slice(0,4).map(src=>`<img src="${src}" alt="">`).join('');
      modalThumbs.querySelectorAll('img').forEach(img=>{
        img.addEventListener('click',()=>{ modalMain.src = img.src; });
      });
      modalMain.onclick = () => window.open(modalMain.src, '_blank');

      // tailles
      modalSizes.innerHTML = p.sizes.map(s=>`<button class="pill ${s===currentSize?'active':''}" data-size="${s}">${s}</button>`).join('');
      modalSizes.onclick = (e)=>{
        if(e.target.classList.contains('pill')){
          modalSizes.querySelectorAll('.pill').forEach(b=>b.classList.remove('active'));
          e.target.classList.add('active'); currentSize = e.target.dataset.size;
        }
      };

      // avis
      modalReviews.innerHTML = '<strong style="display:block;margin-bottom:8px">Avis</strong>' + 
        (p.reviews?.length ? p.reviews.map(r => `
          <div class="review">
            <div class="avatar"></div>
            <div><strong>${r.author}</strong><p>${r.text}</p></div>
          </div>
        `).join('') : `<div class="muted">Pas encore d‚Äôavis.</div>`);

      // actions
      modalAdd.onclick = ()=>{ addToCart(p.id, currentSize); };
      modalBuy.onclick = ()=>{ addToCart(p.id, currentSize); openDrawer(); };

      overlay.classList.add('show');
      overlay.setAttribute('aria-hidden','false');
      document.body.style.overflow='hidden';
    }

    function closeProduct(){
      overlay.classList.remove('show');
      overlay.setAttribute('aria-hidden','true');
      document.body.style.overflow='';
      currentId = null; currentSize = null;
    }

    function addToCart(id, size){
      if(!size){ alert('Choisis une taille.'); return; }
      const cart = loadCart();
      const existing = cart.find(i => i.id === id && i.size === size);
      if(existing) existing.qty += 1; else cart.push({ id, size, qty: 1 });
      saveCart(cart); renderCart();
    }

    modalClose.addEventListener('click', closeProduct);
    overlay.addEventListener('click', (e)=>{ if(e.target === overlay) closeProduct(); });
    document.addEventListener('keydown', (e)=>{ if(e.key === 'Escape' && overlay.classList.contains('show')) closeProduct(); });

    // ouvrir en cliquant n‚Äôimporte quelle carte (sauf le bouton d‚Äôajout)
    document.querySelectorAll('.card').forEach(card=>{
      card.addEventListener('click', (e)=>{
        if(e.target.classList.contains('add-btn')) return;
        openProduct(card.dataset.open);
      });
    });

    // ------- Checkout (placeholder)
    const checkoutBtn = document.getElementById('checkoutBtn');
    const errorEl = document.getElementById('error');
    const successEl = document.getElementById('success');
    checkoutBtn.addEventListener('click', async () => {
      errorEl.textContent = '';
      successEl.textContent = '';
      const cart = loadCart();
      if(cart.length === 0) { errorEl.textContent = 'Ton panier est vide.'; return; }
      errorEl.textContent = 'Paiement non configur√© sur GitHub Pages (Stripe n√©cessite un backend).';
    });

    // ann√©e footer
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>
</body>
</html>
